<!DOCTYPE html>
<html lang="pt">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login User</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Mukta:wght@400;600;700;900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Days+One:wght@400;600;700;900&display=swap" rel="stylesheet">
</head>

<body>
    <header>
        <a href="#" class="logo">Fast & Furious Cars Inc.</a>
    </header>

    <main>
        <a href="#" class="back"> &lt; Voltar</a>

        <div class="container">
            <form>
                <h2>Login de conta Pessoal</h2>
                <div class="inputContainer">
                    <label for="username"></label>Username ou E-mail</label>
                    <input type="text" id="username" name="username">
                </div>
                <div class="inputContainer">
                    <label for="password">Password</label>
                    <input type="text" id="password" name="password">
                </div>
                <div class="buttonContainer">
                    <a href="#">Criar Conta</a>
                    <button type="submit" id="login">Iniciar Sessão</button>
                </div>

                <div class="linkContainer">
                    <a href="#">Inicie sessão com a sua conta de Administrador</a>
                    <img src="#" alt="link">
                </div>
            </form>
        </div>
        <php
        $str = "dbname=postgres user=postgres password=postgres host=localhost port=5432";
$connection = pg_connect($str);

if (!$connection) {
    die("Erro na conexão");
            }
            
$user = $_GET['username'];
$pass = $_GET['password'];

// Consulta correta com aspas simples ao redor de $user
$resultados = pg_query($connection, "SELECT password FROM cliente WHERE username='$user'") or die("Erro na consulta");

if (pg_num_rows($resultados) != 0) {
    $row = pg_fetch_assoc($resultados);
    if ($pass === $row['password']) {
        echo "Autenticação bem-sucedida";
    } else {
        echo "Senha ou usuário incorretos";
    }
} else {
    echo "Usuário não encontrado";
}

//exporta a informação para utilizar em outras paginas
session_start();
$_SESSION['user'] = $user;

pg_close($connection);
        >
    </main>
</body>

</html>
